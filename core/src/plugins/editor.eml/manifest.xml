<?xml version="1.0" encoding="UTF-8"?>
<editor id="editor.eml" openable="true" text="editor.eml.name" title="editor.eml.title" icon="mail_generic.png" className="EmlViewer" mimes="eml" formId="emlviewer_box">
	<class_definition filename="plugins/editor.eml/class.EmlParser.php" classname="EmlParser"/>
	<resources>
		<js file="plugins/editor.eml/class.EmlViewer.js" className="EmlViewer"/>
		<css file="plugins/editor.eml/emlViewer.css"/>
		<i18n namespace="editor.eml" path="plugins/editor.eml/i18n" />				
	</resources>
	<clientForm id="emlviewer_box"><![CDATA[
		<div id="emlviewer_box" action="view_eml" box_width="80%" box_height="80%" box_padding="0">
			<div class="action_bar" style="width: 100%;">			
				<a href="#" id="downloadFileButton" onclick="return false;"><img width="22" height="22" src="AJXP_THEME_FOLDER/images/actions/22/download_manager.png" alt="" border="0"><br><span message_id="88">AJXP_MESSAGE[88]</span></a>
			</div>
			<div id="emlHeaderContainer">
			</div>
			<form id="emlDownloadAttachmentForm" style="display:none" target="download_iframe" method="GET" action="content.php">			
			</form>
		</div>				
	]]></clientForm>
	<registry_contributions>
		<actions>
			<action name="eml_get_xml_structure">
				<processing>
					<serverCallback methodName="switchAction"></serverCallback>
				</processing>
			</action>
			<action name="eml_get_bodies">
				<processing>
					<serverCallback methodName="switchAction"></serverCallback>
				</processing>
			</action>
			<action name="eml_dl_attachment">
				<processing>
					<serverCallback methodName="switchAction"></serverCallback>
				</processing>
			</action>
			<action name="ls">
				<post_processing>
					<serverCallback methodName="lsPostProcess" capture="true"></serverCallback>
				</post_processing>
			</action>
		</actions>
		<hooks>
			<serverCallback hookName="ls.metadata" methodName="extractMimeHeaders"></serverCallback>
		</hooks>	
	</registry_contributions>
	<dependencies>
		<!-- Image proxy must be implemented -->
		<activePlugin pluginName="access.AJXP_STREAM_PROVIDER"/>
	</dependencies>				
</editor>